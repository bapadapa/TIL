# 관계형 데이터 베이스

## 개념

- `2차원 테이블`을 이용하여 데이터 상호 관계를 정의하는 DB
- `개체 릴레이션` 및 `관계 릴레이션`이 존재한다
- 관계형 DB 장단점
  - 장점 : 간결하여 `가독성`이 좋고, `이식성`이 높다
  - 단점 : 성능이 떨어진다

## 릴레이션 구조

- 데이터를 테이블 형태로 구현한 것
  - 릴레이션 `스키마` 및 `인스턴스`로 구성된다

## 튜플

- 릴레이션의 행 (row, tuple, recode...)
- 갯수 : 카디널리티, 기수, 대응수, 등으로 불림

## 속성

- DB의 가장 작은 논리적 단위
- 각 개체의 특성을 나타냄
- 릴레이션의 열을 나타냄(디그리,차수,column...)

## 도메인

- 하나의 속성이 취할 수 있는 같은 타입의 원자 값들의 집합

## 릴레이션의 특징

- 릴레이션의 튜플은 유일해야한다
- 튜플의 순서는 없다.
- 튜플들의 CRUD등 작업으로 릴레이션은 시간에 따라 변한다.
- 스키마를 구성하는 `속성간 순서`는 중요하지 않다.
- 속성의 `명칭은 유일`하지만, `값은 중복`이 있을 수 있다.
- 식별을 위해 `부분잡합을 key`로 설정한다
- 속성값은 `원자값`만 저장한다

## 데이터 모델

- 관계형 DB에서 `상호 관계`를 정의하는 `DB구조`
- `속성` 및 `테이블` 간의 관계를 설정하여 사용
- `기본키` 및 `외래키`로 데이터 간의 관계를 표현
- `계층` ,`망` 모델의 구조를 단순화 시킨 모델이다.
- 대표 언어 : `SQL`

## 제약조건

### 키 (Key)

- 튜플 검색 혹은 정렬시 기준이 되는 속성
- 종류

  1.  후보키(Candidate)

      - 튜플을 유일하게 식별하기 위해 사용되는 속성들의 부분집합
      - 필요 조건
        1. 유일성
           - 중복이 없어야함
        2. 최소성
           - 꼭 필요한 속성으로 구성되어있어야 함

  2.  기본키(Primary)
      - 후보키중 선정된 메인키(Main Key)
      - `중복 불가`,`NULL값 불가`
  3.  대체키(Alternative)( 보조키 )
      - 기본키를 제외한 후보키
  4.  슈퍼키(Super)

      - `속성들의 집합`으로 구성된 키
      - `유일성`은 만족하지만, `최소성`은 만족하지 않는다

  5.  외래키(Foreign)
      - `다른 릴레이션`의 기본키를 `참조시 사용`하는 속성의 집합
      - 외래키로 지정되면, 참조 릴레이션의 기본키에 없는 값은 입력할 수 없다.

## 관계형 DB 제약조건

### 무결성

- DB에 저장된 값과 실제값이 일치하는 정확성

#### 종류

1. 개체 무결성
   - 기본 키는 어떤 속성도 `NULL` 및 `중복값`을 가질 수 없다.
2. 참조 무결성
   - 외래키는 `NULL값` 혹흔 참조 릴레이션의 `기본키와 동일`해야함
3. 도메인 무결성
   - 속성 값이 정의된 도메인의 속성값이어야함
4. 사용자 정의 무결성
   - 속성값이 사용자 정의 제약조건에 만족해야함
5. NULL 무결성
   - 특정 속성값이 NULL이 될 수 없다
6. 고유 무결성
   - 각 튜플이 갖는 속성값들이 서로 달라야함
7. 키 무결성
   - 각 릴레이션은 `1개 이상`의 키가 있어야함
8. 관계 무결성
   - 튜플 `삽입 여부` 혹은 다른 릴레이션과의 `튜플 관계`에 대한 적절성 여부

#### 데이터 무결성 강화

- 데이터 특성에 따라 적절한 무결성을 정의해야함
- 어플리케이션
  - 데이터 CRUD시 무결성 조건 `검증코드`를 프로그램 내에 추가
- DB 트리거
  - 트리거 이벤트에 무결성 조건을 실행하는 절차형 SQL추가
- 제약 조건
  - DB 에 제약 조건을 설정하여 무결성 유지

## 관계대수 및 관계해성

### 관계 대수

- 원하는 정보를 검색하기 위해 기술하는 절차적 언어
- 연산의 순서를 명시한다

#### 관계연산자

1. select
   - 특정 튜플 조건적 선택
   - 행에 관한 튜플을 구함으로 `수평 연산`이라고도 불림
   - 기호 : 시그마 σ
2. Project
   - 특정 속성을 추출하여 릴레이션 생성
   - 중복제거
   - 열에 관한 속성을 추출하여 `수직 연산`이라고도 불림
   - 기호 : 파이 π
3. join

   - 2개의 릴레이션을 합쳐 릴레이션 생성
   - 교차곱을 한 후 select를 수행한 것과 동일
   - 기호 : ⋈

4. division
   - 릴레이션 R,S가 있을 때, R⊃S인 경우, S의 속성값을 모두 가진 튜플에서, S의 속성 값을 가진 것만 제외한것
   - 기호 : ÷

#### 일반 관계연산자

`수학적 집합 이론에서 사용하는 연산자`

- 아래 연산을 하려면 `합병 조건`을 만족해야 한다.
  - 합병 조건 : 릴레이션간 `속성수` 및 `대응 속성의 도메인`이 동일해야함

1. 합집합(Union)
   - 두 릴레이션에 존재하는 튜플의 합집합을 구한다.
   - 기호 : ∪
2. 교집합(Intersection)

   - 두 릴레이션에 존재하는 튜플의 교집합을 구한다.
   - 기호 : ∩

3. 차집합(Difference)

   - 두 릴레이션의 차집합을 구한다.
   - 기호 : －

4. 교집합(Cartesian Product)
   - 두 릴레이션에 존재하는 튜플들의 결합된 정보를 구하는 연산이다.
   - 기호 : ×

### 관계 해석

- 관계 데이터의 연산을 표현하는 방법
- 원하는 정보만 정의하는 비절차적 특성을 지닌다.
- 계산 수식을 사용한다.

## 이상/ 함수적 종속

### 이상 (Anomaly)

- 속성들의 `종속`으로 인해 데이터의 `중복`이 발생하여 테이블 조작시 문제가 발생하는 현상.

1. 삽입 이상 ( Insertion Anomaly )
   - 삽입시 원치 않은 값이 삽입되는 현상
2. 삭제 이상 ( Deletion Anomaly )
   - 삭제시 상관 없 는 값도 같이 삭제(연쇄삭제)되는 현상
3. 갱신 이상 ( Update Anomaly )
   - 갱신시 일부 튜플의 정보만 갱신되어 `정보에 불일치성`이 발생하는 현상

### 함수적 종속 (Functional Dependency)

- 함수간 상관관계라고 볼 수 있다.
- 데이터의 의미를 표현하는 것임으로, 항상 유지되어야 할 조건이다.
- X -> Y
  1. X 는 결정자, Y 는 종속자라고 한다.
  2. X 가 Y 를 함수적으로 결정한다.
  3. Y 가 X 에 함수적으로 종속되어 있다.

# 정규화

- 테이블의 속성들이 상호 종속적인 관계를 갖는 특성을 이용하여 테이블을 `무손실 분해` 하는 과정
  - 무손실 분해
    분해된 릴레이션이 `Natural join` 시 기존의 릴레이션으로 돌아가는 상태
- 중복을 제거하여 CRUD 이상 발생을 줄이는게 목표

1. 제 1정규형

   - 모든 `도메인이 원자값`을 가짐

2. 제 2정규형
   - 기본키가 아닌 `모든 속성`이 기본키에 대해 `완전 함수적 종속`을 만족
   - `부분적 함수 종속 제거`
3. 제 3정규형
   - 기본키가 아닌 모든 속성이 기본키에 대해 `이행적 함수적 종속`을 만족하지 않음
   - 이행적 함수적 종속
     - a->b , b->c ,a->c를 만족하는 관계
   - `결정자 이면서 후보키가 아닌 것 제거`
4. DCNF
   - `모든 결정자가 후보키임`
   - `이행적 함수 종속 제거`
5. 제 4정규형
   - `다치 종속 제거`
     - A,B,C 속성중 A,B으로 이루어진 복합 속성에 대응히는 C값의 집합이 A에만 종속되고, B에는 무관한 종속관계
     - 즉, `A,B로 이루어진 복합 속성`이지만, A혹은B `1개만 이용`하여 종속관계가 이루어지는 상황
6. 제 5정규형
   - `조인 종속성 이용`
     - 부분 집합들을 `Projection`시 부분 집합을 `JOIN한 결과`와 `동일한 경우`

# 반정규화

- 정규화된 데이터 모델을 의도적으로 `통합`,`중복`,`분리` 하여 정규화 원칙을 위배하는 행위
- `효율성은 증가`하지만, `일관성 및 정합성이 저하`될 수 있다.

## 반정규화 방법

1.  테이블 통합

    - `join문 사용 빈도가 높은`경우 성능 향상을 위해 통합
    - 통합 고려할 경우
      1. 테이블 간 동일한 프로세스가 빈번히 발생하는 경우
      2. 항상 두 테이블을 이용한 조회 수행을 하는경우
    - 통합 종류
      1. 1:1 관게 테이블 통합
      2. 1:N 관게 테이블 통합
      3. 슈퍼/서브 타입 테이블 통합
         - `슈퍼 : 부모` , `서브 : 자식`

2.  테이블 분할
    - 수직 혹은 수평으로 분할하는 것
    - 수직 분할
      1. 레코드 기준 테이블 분할
      2. 레코드별 빈도수에 따라 테이블 분할
    - 수평 분할
      1. 테이블에 속성이 너무 많을경우 분할
      2. 종류에 따라 분할
         1. `갱신 빈도`에 따른 속성 분할
         2. `빈도수`에 따른 속성 분할
         3. `크기`에 따른 속성 분할
         4. `보안`에 따른 속성 분할
3.  중복 테이블 추가
    - 작업의 `효율성을 향상`시키기위에 테이블을 추가하는것
    - 추가할 경우
      1. 여러 테이블에서 데이터를 추출해서 사용하는 경우
      2. 다른 서버의 데이터를 이용할 경우
    - 추가 방법
      1. 집계 테이블 추가
      - `집계 데이터`를 위한 테이블생성
      - 원본 테이블에 `트리거를 설정`하여 사용
        - 트리거 : CRUD등 `이벤트 발생`시 `자동으로 수행`되는 SQL
      2. 진행 테이블 추가
      - `이력 관리`등을 목적으로 추가하는 테이블
        - 이력관리 : 속성값 변경시 변경 전의 속성 값을 저장
          - Log라고 생각하면 편할듯
      3. 특정 부분을 포함하는 테이블 추가
      - 데이터가 방대할 경우 그 부분만 새로운 테이블로 생성
4.  중복 속성 추가
    - 데이터 처리시 조회하는 `경로 단축`을 위해 속성을 추가하는 것
    - `무결성 확보가 어려워`지고, `디스크 공간이 추가`된다
    - 중복 속성 추가하는 경우
      1. `조인`이 빈번히 발생
      2. `접근 경로`가 복잡
      3. `엑세스 조건`으로 자주 사용되는 경우
      4. `기본키`가 `부적절` 하거나, `여러 속성`으로 구성된 경우
